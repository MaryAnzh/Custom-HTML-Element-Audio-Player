(()=>{"use strict";class t{constructor(t,e="div",s="",i="",n=null){const a=document.createElement(e);Array.isArray(s)&&s.forEach((t=>a.classList.add(t))),"string"==typeof s&&(a.className=s),a.textContent=i,t&&t.append(a),n&&n.forEach((t=>a.setAttribute(t.name,t.value))),this.node=a}destroy(){this.node.remove()}}class e extends t{constructor(){super(null,"nav","nav"),this._navLists=[{name:"main",key:"MAIN"},{name:"about",key:"ABOUT"}],this.nodeKey="NAV",this.navItems=[],this._ul=new t(this.node,"ul","nav__list","",null),this._navLists.forEach(((e,s)=>{const i=new t(this._ul.node,"li","nav__list__item","",null),n=0===s?"#/":`#/${e.name}`,a=new t(i.node,"a","nav__list__item__link","",[{name:"href",value:n}]);this.navItems.push({element:a.node,perentKey:this.nodeKey,elementKey:e.key})}))}translate(t){this.navItems.forEach((e=>{const s=e.elementKey;e.element.textContent=t.NAV[s]}))}}class s extends t{constructor(s){super(null,"header","header"),this.navItems=[],this.langs=s,this.container=new t(this.node,"div","container"),this._nav=new e,this.navItems=this._nav.navItems,this.container.node.appendChild(this._nav.node),this.langsWrap=new t(this.container.node,"div","container__langs"),this.langs.forEach(((e,s)=>{const i=new t(this.langsWrap.node,"div","header__langs__item"),n=new t(i.node,"input","header__langs__item__input","",[{name:"name",value:"lang"},{name:"id",value:`${e}`},{name:"type",value:"radio"}]);n.node.onchange=()=>this.onChange(e),0===s&&(n.node.checked=!0),new t(i.node,"label","header__langs__item__label",e,[{name:"for",value:`${e}`}])}))}translate(t){this._nav.translate(t)}selectCurrentPage(t){switch(this.navItems.forEach((t=>t.element.classList.remove("active"))),t){case"/":this.navItems[0].element.classList.add("active");break;case"/about":this.navItems[1].element.classList.add("active")}}}class i{constructor(){this.node=document.createElement("footer"),this.node.classList.add("footer"),this.node.textContent="footer"}}const n=[{title:"Jingle Bell Rock",src:"assets/audio/Christmas_Time_-_Jingle_Bell_Rock_(musmore.com).mp3"},{title:"Jingle Bells",src:"assets/audio/Jingle Bells - Christmas Songs.mp3"},{title:"Happy New Year",src:"assets/audio/Happy New Year.mp3"}];class a extends t{constructor(){super(null,"div",["main-page","page"]),this.name="main-page",this.perentKey="MAIN",this.playList=n,this.destroy=()=>{this.node.remove()},this.title=new t(this.node,"h2","main-page__title","Custom HTML Element"),this.audio=document.createElement("audio-player"),this.audio.classList.add("main-page__audio-player"),this.node.appendChild(this.audio),this.audio.playList=n}translate(t){this.title.node.textContent=t.MAIN.TITLE}}class o extends t{constructor(){super(null,"div",["about-page","page"]),this.name="about-page",this.destroy=()=>{this.node.remove()},this._title=new t(this.node,"h2","about-page__title",this.name,null)}translate(t){}}class l extends t{constructor(){super(null,"div",["not-found","page"]),this.name="not-found-page",this.destroy=()=>{this.node.remove()},this._title=new t(this.node,"h2",`${this.name}__title`,this.name)}translate(t){}}const r={NAV:{MAIN:"main",ABOUT:"about"},MAIN:{TITLE:"Custom HTML Element"}},h={NAV:{MAIN:"главная",ABOUT:"о проекте"},MAIN:{TITLE:"Пользовательский HTML элемент"}},d={NAV:{MAIN:"галоўная",ABOUT:"аб праекце"},MAIN:{TITLE:"Спецыялізаваны элемент кіравання"}};class u{constructor(){this.listeners=[]}add(t){this.listeners.push(t)}emit(t){this.listeners.forEach((e=>e(t)))}remove(t){this.listeners=this.listeners.filter((e=>e!==t))}}const c=new class{constructor(){this.onChange=new u,this.langs=["en","ru","by"],this._lang="en"}get lang(){return this._lang}set lang(t){this._lang=t,this.onChange.emit(this.translate(t))}translate(t){switch(t){case"ru":return h;case"by":return d;default:return r}}},_=new class extends t{constructor(){super(document.body,"div","wrapper"),this.currentPage=null,this.translate=t=>{this.header.translate(t),this.currentPage&&this.currentPage.translate(t)},this.header=new s(c.langs),this.footer=new i,this.main=new t(null,"main","main"),this.node.append(this.header.node,this.main.node,this.footer.node),this.header.onChange=t=>{c.lang=t},c.onChange.add(this.translate)}addPage(t){this.header.selectCurrentPage(t);let e=null;switch(t){case"/":e=new a;break;case"/about":e=new o;break;default:e=new l}this.currentPage=e,this.main.node.appendChild(e.node),c.lang="en"}removePage(){null!==this.currentPage&&this.currentPage.destroy()}destroy(){c.onChange.remove(this.translate),super.destroy()}};class m{constructor(){}static viewTime(t){const e=1e3*t;let s=Math.floor(e/1e3/60),i=Math.floor((e-1e3*s*60)/1e3);return i>59&&(s+=1,i-=60),(s<10?`0${s}`:s)+":"+(i<10?`0${i}`:i)}}class p extends t{constructor(e){super(e,"div","audio"),this._audio=new Audio,this.isPlay=!1,this.audioControls=new t(this.node,"div","audio__controls"),this.topContainar=new t(this.audioControls.node,"div","audio__controls__top"),this.playButton=new t(this.topContainar.node,"button","audio__controls__top__button","+"),this.audioTitle=new t(this.topContainar.node,"h4","audio__controls__top__title","Title"),this.timeBar=new t(this.audioControls.node,"div","audio__controls__time-bar"),this.timeBarRunner=new t(this.timeBar.node,"div","audio__controls__time-bar__runner"),this.times=new t(this.audioControls.node,"div","audio__controls__times"),this.timesTimer=new t(this.times.node,"p","audio__controls__times__timer","00:00"),this.audioTime=new t(this.times.node,"p","audio__controls__times__audio-time","00:00"),this.soundBar=new t(this.audioControls.node,"div","audio__controls__sound-bar"),this.soundBarRunner=new t(this.soundBar.node,"div","audio__controls__sound-bar__runner")}update(t){this._audio.src=t.src,this.audioTime.node.textContent=t.time?m.viewTime(t.time):"00:00",this.audioTitle.node.textContent=t.title}play(){this._audio.play(),this.isPlay=!0}pause(){this._audio.pause(),this.isPlay=!1}startTimer(){}private(){}}class w extends t{constructor(e){super(null,"li","items-list__item"),this.icon=new t(this.node,"div","items-list__item__icon");const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 30 15.7"),s.innerHTML='<path d="M29.7,1.4l-14,14c-0.4,0.4-1,0.4-1.4,0l-14-14c-0.4-0.4-0.4-1,0-1.4h29.4C30.1,0.4,30.1,1,29.7,1.4z"/>\n        ',this.icon.node.appendChild(s),this.icon.node.onclick=()=>this.onClick(),this.container=new t(this.node,"div","items-list__item__info"),this.title=new t(this.container.node,"p","",e.title);const i=e.time?m.viewTime(e.time):"00:00";this.time=new t(this.container.node,"p","",i)}destroy(){this.icon.node.onclick=null,super.destroy()}}var v=function(t,e,s,i){return new(s||(s=Promise))((function(n,a){function o(t){try{r(i.next(t))}catch(t){a(t)}}function l(t){try{r(i.throw(t))}catch(t){a(t)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,l)}r((i=i.apply(t,e||[])).next())}))};class g extends HTMLElement{constructor(){super(),this.currentAudioItem=null,this.waitListItems=[],this.onClick=(t,e)=>{({moveItemToPlayList:this.moveItemToPlayList,playStopAudio:this.playStopAudio})[t](e)},this.playStopAudio=t=>{},this.moveItemToPlayList=t=>{console.log(this.waitListItems),this.waitListItems=this.waitListItems.filter((e=>e!==t))},this.playListItems=[]}get playList(){return JSON.parse(this.getAttribute("playList"))}set playList(t){this.setAttribute("playList",JSON.stringify(t))}connectedCallback(){return v(this,void 0,void 0,(function*(){this.waitListItems=yield this.updateAudioList(this.playList),this.container=new t(this,"section","audio-player"),this.controls=new p(this.container.node),this.lists=new t(this.container.node,"div","audio-player__lists"),this.playListWrap=new t(this.lists.node,"div",["audio-player__lists__play-list","list"]),this.playListTitle=new t(this.playListWrap.node,"h4","list__title","Play List"),this.playListUl=new t(this.playListWrap.node,"ul","audio-player__lists__play-list__list"),this.waitingList=new t(this.lists.node,"h3",["audio-player__lists__waiting-list","list"]),this.waitingListTitle=new t(this.waitingList.node,"h4","list__title","Waiting list"),this.waitingListUl=new t(this.waitingList.node,"ul","items-list"),this.waitListItems.forEach((t=>{const e=new w(t);t.item=e,e.onClick=()=>this.onClick("moveItemToPlayList",t),this.waitingListUl.node.appendChild(e.node)})),console.log(this.waitListItems)}))}disconnectedCallback(){}attributeChangedCallback(t,e,s){}updateAudioList(t){return v(this,void 0,void 0,(function*(){const e=[];for(let s=0;s<t.length;s++){const i=t[s],n=new Audio;i.audio=n,n.src=i.src;const a=yield new Promise((t=>{n.onloadedmetadata=()=>{t(n.duration)}}));i.time=a,e.push(i)}return e}))}}g.observedAttributes=["playList"],customElements.define("audio-player",g);let y=null;const L=new class{constructor(t){this.route=()=>{const t=this.parseRequestURL();return this.routes.filter((e=>e==t))[0]},this.parseRequestURL=()=>{let t=(location.hash.slice(1).toLowerCase()||"/").split("/"),e={resource:null,id:null,verb:null};return e.resource=t[1],e.id=t[2],e.verb=t[3],(e.resource?"/"+e.resource:"/")+(e.id?"/:id":"")+(e.verb?"/"+e.verb:"")},this.routes=t,this.notFound=new l}}(["/","/about"]),C=()=>{const t=L.route();y=t,_.addPage(t)};window.onload=()=>{C()},window.addEventListener("hashchange",(()=>{_.removePage(),C()}))})();
//# sourceMappingURL=main.js.map