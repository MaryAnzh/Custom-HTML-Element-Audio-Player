(()=>{"use strict";class e{constructor(e,t="div",s="",i="",n=null){const a=document.createElement(t);Array.isArray(s)&&s.forEach((e=>a.classList.add(e))),"string"==typeof s&&(a.className=s),a.textContent=i,e&&e.append(a),n&&n.forEach((e=>a.setAttribute(e.name,e.value))),this.node=a}destroy(){this.node.remove()}}class t extends e{constructor(){super(null,"nav","nav"),this._navLists=[{name:"main",key:"MAIN"},{name:"about",key:"ABOUT"}],this.nodeKey="NAV",this.navItems=[],this._ul=new e(this.node,"ul","nav__list","",null),this._navLists.forEach(((t,s)=>{const i=new e(this._ul.node,"li","nav__list__item","",null),n=0===s?"#/":`#/${t.name}`,a=new e(i.node,"a","nav__list__item__link","",[{name:"href",value:n}]);this.navItems.push({element:a.node,perentKey:this.nodeKey,elementKey:t.key})}))}translate(e){this.navItems.forEach((t=>{const s=t.elementKey;t.element.textContent=e.NAV[s]}))}}class s extends e{constructor(s){super(null,"header","header"),this.navItems=[],this.langs=s,this.container=new e(this.node,"div","container"),this._nav=new t,this.navItems=this._nav.navItems,this.container.node.appendChild(this._nav.node),this.langsWrap=new e(this.container.node,"div","container__langs"),this.langs.forEach(((t,s)=>{const i=new e(this.langsWrap.node,"div","header__langs__item"),n=new e(i.node,"input","header__langs__item__input","",[{name:"name",value:"lang"},{name:"id",value:`${t}`},{name:"type",value:"radio"}]);n.node.onchange=()=>this.onChange(t),0===s&&(n.node.checked=!0),new e(i.node,"label","header__langs__item__label",t,[{name:"for",value:`${t}`}])}))}translate(e){this._nav.translate(e)}selectCurrentPage(e){switch(this.navItems.forEach((e=>e.element.classList.remove("active"))),e){case"/":this.navItems[0].element.classList.add("active");break;case"/about":this.navItems[1].element.classList.add("active")}}}class i{constructor(){this.node=document.createElement("footer"),this.node.classList.add("footer"),this.node.textContent="footer"}}const n=[{title:"Jingle Bell Rock",src:"assets/audio/Christmas_Time_-_Jingle_Bell_Rock_(musmore.com).mp3"},{title:"Jingle Bells",src:"assets/audio/Jingle Bells - Christmas Songs.mp3"},{title:"Happy New Year",src:"assets/audio/Happy New Year.mp3"}];class a extends e{constructor(){super(null,"div",["main-page","page"]),this.name="main-page",this.perentKey="MAIN",this.playList=n,this.destroy=()=>{this.node.remove()},this.title=new e(this.node,"h2","main-page__title","Custom HTML Element"),this.audio=document.createElement("audio-player"),this.audio.classList.add("main-page__audio-player"),this.node.appendChild(this.audio),this.audio.playList=n}translate(e){this.title.node.textContent=e.MAIN.TITLE}}class o extends e{constructor(){super(null,"div",["about-page","page"]),this.name="about-page",this.destroy=()=>{this.node.remove()},this._title=new e(this.node,"h2","about-page__title",this.name,null)}translate(e){}}class l extends e{constructor(){super(null,"div",["not-found","page"]),this.name="not-found-page",this.destroy=()=>{this.node.remove()},this._title=new e(this.node,"h2",`${this.name}__title`,this.name)}translate(e){}}const r={NAV:{MAIN:"main",ABOUT:"about"},MAIN:{TITLE:"Custom HTML Element"}},h={NAV:{MAIN:"главная",ABOUT:"о проекте"},MAIN:{TITLE:"Пользовательский HTML элемент"}},d={NAV:{MAIN:"галоўная",ABOUT:"аб праекце"},MAIN:{TITLE:"Спецыялізаваны элемент кіравання"}};class u{constructor(){this.listeners=[]}add(e){this.listeners.push(e)}emit(e){this.listeners.forEach((t=>t(e)))}remove(e){this.listeners=this.listeners.filter((t=>t!==e))}}const c=new class{constructor(){this.onChange=new u,this.langs=["en","ru","by"],this._lang="en"}get lang(){return this._lang}set lang(e){this._lang=e,this.onChange.emit(this.translate(e))}translate(e){switch(e){case"ru":return h;case"by":return d;default:return r}}},_=new class extends e{constructor(){super(document.body,"div","wrapper"),this.currentPage=null,this.translate=e=>{this.header.translate(e),this.currentPage&&this.currentPage.translate(e)},this.header=new s(c.langs),this.footer=new i,this.main=new e(null,"main","main"),this.node.append(this.header.node,this.main.node,this.footer.node),this.header.onChange=e=>{c.lang=e},c.onChange.add(this.translate)}addPage(e){this.header.selectCurrentPage(e);let t=null;switch(e){case"/":t=new a;break;case"/about":t=new o;break;default:t=new l}this.currentPage=t,this.main.node.appendChild(t.node),c.lang="en"}removePage(){null!==this.currentPage&&this.currentPage.destroy()}destroy(){c.onChange.remove(this.translate),super.destroy()}};class m extends HTMLElement{constructor(){super(),this.audio=new Audio,this.currwntAudioInfo=null,this.waitListItems=[],this.playListItems=[],this.isPlay=!1,this.onClick=(e,t,s)=>{({playItem:this.playItem})[e](t,s)},this.playItem=(e,t)=>{this.audio===t?this.isPlay?this.play():this.pause():(this.isPlay&&(this.audio.pause(),this.audio.currentTime=0),this.currwntAudioInfo=e,this.audio=t,this.update(),this.play())}}get playList(){return JSON.parse(this.getAttribute("playList"))}set playList(e){this.setAttribute("playList",JSON.stringify(e))}connectedCallback(){this.container=new e(this,"section","audio-player"),this.controls=new e(this.container.node,"div","audio-player__controls"),this.playButton=new e(this.controls.node,"button","audio-player__controls__button","+"),this.playButton.node.onclick=()=>this.play(),this.timeBar=new e(this.controls.node,"div","audio-player__controls__time-bar"),this.timeBarRunner=new e(this.timeBar.node,"div","audio-player__controls__time-bar__runner"),this.times=new e(this.controls.node,"div","audio-player__controls__times"),this.timesTimer=new e(this.times.node,"p","audio-player__controls__times__timer","00:00"),this.timesAudioTime=new e(this.times.node,"p","audio-player__controls__times__audio-time","00:00"),this.soundBar=new e(this.controls.node,"div","audio-player__controls__sound-bar"),this.soundBarRunner=new e(this.soundBar.node,"div","audio-player__controls__sound-bar__runner"),this.lists=new e(this.container.node,"div","audio-player__lists"),this.playListWrap=new e(this.lists.node,"div",["audio-player__lists__play-list","list"]),this.playListTitle=new e(this.playListWrap.node,"h4","list__title","Play List"),this.playListUl=new e(this.playListWrap.node,"ul","audio-player__lists__play-list__list"),this.waitingList=new e(this.lists.node,"h3",["audio-player__lists__waiting-list","list"]),this.waitingListTitle=new e(this.waitingList.node,"h4","list__title","Waiting list")}disconnectedCallback(){}attributeChangedCallback(e,t,s){}update(){}play(){this.audio.play(),this.isPlay=!0}pause(){this.audio.pause(),this.isPlay=!1}viewTime(e){const t=1e3*e;let s=Math.floor(t/1e3/60),i=Math.floor((t-1e3*s*60)/1e3);return i>59&&(s+=1,i-=60),(s<10?`0${s}`:s)+":"+(i<10?`0${i}`:i)}}m.observedAttributes=["playList"],customElements.define("audio-player",m);let p=null;const y=new class{constructor(e){this.route=()=>{const e=this.parseRequestURL();return this.routes.filter((t=>t==e))[0]},this.parseRequestURL=()=>{let e=(location.hash.slice(1).toLowerCase()||"/").split("/"),t={resource:null,id:null,verb:null};return t.resource=e[1],t.id=e[2],t.verb=e[3],(t.resource?"/"+t.resource:"/")+(t.id?"/:id":"")+(t.verb?"/"+t.verb:"")},this.routes=e,this.notFound=new l}}(["/","/about"]),g=()=>{const e=y.route();p=e,_.addPage(e)};window.onload=()=>{g()},window.addEventListener("hashchange",(()=>{_.removePage(),g()}))})();
//# sourceMappingURL=main.js.map